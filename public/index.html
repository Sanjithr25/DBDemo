<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeeMem — Meeting Memory Assistant</title>
    <meta name="description"
        content="Ask questions about your session notes and meeting minutes. Powered by RAG with Zilliz vector search and Groq AI.">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>

<body>
    <div class="bg-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
    </div>

    <div class="app">

        <!-- Sidebar overlay (mobile tap-to-close) -->
        <div class="sidebar-overlay" id="sidebarOverlay" onclick="closeSidebar()"></div>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-brand">
                <div class="sidebar-header">
                    <div class="logo">
                        <i class="fas fa-brain"></i>
                        <span>Mee<strong>Mem</strong></span>
                    </div>
                    <button class="sidebar-close" onclick="closeSidebar()" title="Close menu">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <p class="sidebar-sub">Meeting Memory Assistant</p>
            </div>

            <nav class="sidebar-nav">
                <p class="nav-label">Try asking</p>
                <button class="suggestion-btn" onclick="setQuery('Key rules to follow in email communication')">
                    <i class="fas fa-envelope"></i>Email Communication Rules
                </button>
                <button class="suggestion-btn" onclick="setQuery('Core concepts discussed during database session')">
                    <i class="fas fa-database"></i>Database Session Concepts
                </button>
                <button class="suggestion-btn" onclick="setQuery('Implementation steps for github actions CI/CD')">
                    <i class="fas fa-code-branch"></i>GitHub Actions CI/CD
                </button>
            </nav>

            <div class="sidebar-info">
                <p class="nav-label">Powered by</p>
                <div class="info-pill">
                    <i class="fas fa-database"></i>
                    <span>Zilliz Vector DB</span>
                </div>
                <div class="info-pill">
                    <i class="fas fa-table"></i>
                    <span>Supabase Metadata</span>
                </div>
                <div class="info-pill">
                    <i class="fas fa-robot"></i>
                    <span>Groq / LLaMA 3.3</span>
                </div>
            </div>
        </aside>

        <!-- Main -->
        <main class="main">

            <!-- Top bar -->
            <header class="topbar">
                <div class="topbar-left">
                    <button class="hamburger" id="hamburger" onclick="openSidebar()" title="Open menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="topbar-title">
                        <h1>Your <span>Meeting Memory</span></h1>
                        <p>Ask anything — MeeMem searches all your MoMs and answers instantly</p>
                    </div>
                </div>
                <button class="theme-toggle" id="themeToggle" title="Toggle dark mode" onclick="toggleTheme()">
                    <i class="fas fa-moon" id="themeIcon"></i>
                </button>
            </header>

            <!-- Answer panel -->
            <section class="answer-panel" id="answerPanel">
                <div class="empty-state" id="emptyState">
                    <div class="empty-icon"><i class="fas fa-comments"></i></div>
                    <h2>What do you want to remember?</h2>
                    <p>Type a question below or pick a suggestion from the sidebar to get started.</p>
                </div>

                <!-- Loading state -->
                <div class="loading-state hidden" id="loadingState">
                    <div class="rag-pipeline">
                        <div class="pipeline-step" id="ps-embed">
                            <div class="ps-icon"><i class="fas fa-vector-square"></i>
                                <div class="ps-ring"></div>
                            </div>
                            <div class="ps-text">
                                <span class="ps-label">Embedding Query</span>
                                <span class="ps-sub">all-MiniLM-L6-v2</span>
                            </div>
                        </div>
                        <div class="pipeline-arrow" id="pa-1">
                            <div class="arrow-fill"></div>
                        </div>
                        <div class="pipeline-step" id="ps-retrieve">
                            <div class="ps-icon"><i class="fas fa-search"></i>
                                <div class="ps-ring"></div>
                            </div>
                            <div class="ps-text">
                                <span class="ps-label">Vector Search</span>
                                <span class="ps-sub">Zilliz Cloud</span>
                            </div>
                        </div>
                        <div class="pipeline-arrow" id="pa-2">
                            <div class="arrow-fill"></div>
                        </div>
                        <div class="pipeline-step" id="ps-generate">
                            <div class="ps-icon"><i class="fas fa-robot"></i>
                                <div class="ps-ring"></div>
                            </div>
                            <div class="ps-text">
                                <span class="ps-label">Generating Answer</span>
                                <span class="ps-sub" id="generateSub">Groq / LLaMA 3.3</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Result -->
                <div class="result-state hidden" id="resultState">
                    <div class="result-query-label">
                        <i class="fas fa-quote-left"></i>
                        <span id="resultQuery"></span>
                    </div>

                    <div class="answer-card">
                        <div class="answer-header">
                            <i class="fas fa-robot"></i>
                            <span>Answer</span>
                        </div>
                        <div class="answer-body" id="answerBody"></div>
                    </div>

                    <div class="sources-section" id="sourcesSection">
                        <div class="sources-header">
                            <i class="fas fa-file-alt"></i>
                            <span>Sources Retrieved</span>
                            <span class="source-count" id="sourceCount"></span>
                        </div>
                        <div class="sources-list" id="sourcesList"></div>
                    </div>
                </div>

                <!-- Error -->
                <div class="error-state hidden" id="errorState">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Something went wrong</h3>
                    <p id="errorMsg"></p>
                </div>
            </section>

            <!-- Query Input -->
            <footer class="query-footer">
                <div class="query-box" id="queryBox">
                    <textarea id="queryInput" placeholder="Ask a question about your meeting notes…" rows="1"
                        maxlength="500"></textarea>
                    <button id="sendBtn" onclick="submitQuery()" title="Send">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
                <p class="query-hint">Press <kbd>Enter</kbd> to send &nbsp;·&nbsp; <kbd>Shift+Enter</kbd> for new line
                </p>
            </footer>

        </main>
    </div>

    <script src="script.js"></script>
</body>

</html>